<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>ESP-CLOCK</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/water.css">
    <style>
        input[type="color"] {
            min-height: 3em;
            min-width: 8em;
        }

        .inline {
            display: flex;
            flex-wrap: wrap;
        }

        .inputgroup {
            height: 100px;
            display: flex;
            align-items: center;
            flex-grow: 1;
        }

        .inputgroup>input {
            width: 33.3%%
        }

        .inputgroup>label {
            margin-right: 1em;
            width: 6rem;
        }

        .aside {
            font-size: .8em;
            color: #999;
        }

        #submit {
            float: right;
            background: #0B0;
        }

        footer {
            font-size: .9rem;
            margin-top: 1em;
            color: #666;
        }

        .optbacklight {
            display: none;
        }
    </style>
</head>

<body>
    <span id="jswarn">ENABLE JAVASCRIPT TO CONFIGURE THE CLOCK</span>
    <div id="main" style="display:none">
        <h1 id="title"></h1>
        <form id="configform" onsubmit="return false">
            <span id="currenttime"></span>
            <button id="submit" name="submit">Save settings permanently</button>
            <h3>Color configuration</h3>
            <fieldset>
                <legend>These are the color values in the day</legend>
                <div class="inline">
                    <div class="inputgroup">
                        <label for="hourcolor">Hour color</label>
                        <input type="color" id="hourcolor" name="hourcolor" />
                    </div>
                    <div class="inputgroup">
                        <label for="minutecolor">Minute color</label>
                        <input type="color" id="minutecolor" name="minutecolor" />
                    </div>
                    <div class="inputgroup">
                        <label for="secondcolor">Second color</label>
                        <input type="color" id="secondcolor" name="secondcolor" />
                    </div>
                </div>
                <div class="inline">
                    <div class="inputgroup">
                        <label for="hourdotcolor">Hour dot color</label>
                        <input type="color" id="hourdotcolor" name="hourdotcolor" />
                    </div>
                    <div class="inputgroup">
                        <label for="hourdotcolor">Hour segment color</label>
                        <input type="color" id="hoursegmentcolor" name="hoursegmentcolor" />
                    </div>
                    <div class="inputgroup">
                        <label for="hourdotcolor">Hour quarter color</label>
                        <input type="color" id="hourquartercolor" name="hourquartercolor" />
                    </div>
                </div>
            </fieldset>

            <fieldset>
                <legend>These are the color values in the night</legend>
                <div class="inline">
                    <div class="inputgroup">
                        <label for="hourcolordimmed">Hour color</label>
                        <input type="color" id="hourcolordimmed" name="hourcolordimmed" />
                    </div>
                    <div class="inputgroup">
                        <label for="minutecolordimmed">Minute color</label>
                        <input type="color" id="minutecolordimmed" name="minutecolordimmed" />
                    </div>
                    <div class="inputgroup">
                        <label for="secondcolordimmed">Second color</label>
                        <input type="color" id="secondcolordimmed" name="secondcolordimmed" />
                    </div>
                </div>
                <div class="inline">
                    <div class="inputgroup">
                        <label for="hourdotcolordimmed">Hour dot color</label>
                        <input type="color" id="hourdotcolordimmed" name="hourdotcolordimmed" />
                    </div>
                    <div class="inputgroup">
                        <label for="hourdotcolordimmed">Hour segment color</label>
                        <input type="color" id="hoursegmentcolordimmed" name="hoursegmentcolordimmed" />
                    </div>
                    <div class="inputgroup">
                        <label for="hourdotcolordimmed">Hour quarter color</label>
                        <input type="color" id="hourquartercolordimmed" name="hourquartercolordimmed" />
                    </div>
                </div>
            </fieldset>

            <fieldset>
                <legend>When shall the clock be dimmed?</legend>
                <div class="inline">
                    <div class="inputgroup">
                        <label for="nighttimebegins"> Night begins at: </label>
                        <input type="time" id="nighttimebegins" name="nighttimebegins" />
                    </div>
                    <div class="inputgroup">
                        <label for="nighttimeends">Night ends at: </label>
                        <input type="time" id="nighttimeends" name="nighttimeends" />
                    </div>
                </div>
            </fieldset>
            <fieldset>
                <legend>Set alarm</legend>
                <div class="inline">
                    <div class="inputgroup">
                        <label for="alarmactive">Enable alarm?</label>
                        <input type="checkbox" id="alarmactive" name="alarmactive" />
                    </div>
                    <div class="inputgroup">
                        <label for="alarmtime">Alarm time: </label>
                        <input type="time" id="alarmtime" name="alarmtime" />
                    </div>
                </div>
            </fieldset>
            <p class="optbglight">
                <label for="bglight">Enable a second LED strip as background light?</label>
                <input type="checkbox" id="bglight" name="bglight" onclick="showBgLight()" />
            </p>
            <fieldset id="bglightfield" class="optbglight">
                <legend>Background light settings</legend>
                <div class="inline">
                    <div class="inputgroup">
                        <label for="bgcolor">Background light color</label>
                        <input type="color" id="bgcolor" name="bgcolor" />
                    </div>
                    <div class="inputgroup">
                        <label for="minutecolordimmed">Background light color in the night</label>
                        <input type="color" id="bgcolordimmed" name="bgcolordimmed" />
                    </div>
                </div>
                <h3>LED settings</h3>
                <p>
                    <label for="bgledpin">Background light LED strip GPIO pin <span class="aside">(Change requires
                            restart)</span></label>
                    <input type="number" id="bgledpin" name="bgledpin" min="0" max="255" step="1" />
                </p>
                <p>
                    <label for="bgledcount">Number of LEDs</label>
                    <input type="number" id="bgledcount" name="bgledcount" min="1" step="1" />
                </p>
            </fieldset>
            <p>
                <label for="hourlight">Light up the clock on the hour?</label>
                <input type="checkbox" id="hourlight" name="hourlight" />
            </p>
            <p>
                <label for="blendcolors">Blend colors when elements overlap?</label>
                <input type="checkbox" id="blendcolors" name="blendcolors" />
            </p>
            <p>
                <label for="blendcolors">Enable fluid fading between the pixels for the second hand?</label>
                <input type="checkbox" id="fluidmotion" name="fluidmotion" />
            </p>
            <label for="timezone">Local timezone <span class="aside">(Change requires restart)</span></label>
            <select id="timezone" name="timezone"></select>
            <h3>LED settings</h3>
            <label for="ledpin">LED strip GPIO pin <span class="aside">(Change requires restart)</span></label>
            <input type="number" id="ledpin" name="ledpin" min="0" max="255" step="1" />
            <label for="ledcount">Number of LEDs</label>
            <input type="number" id="ledcount" name="ledcount" min="1" step="1" />
            <label for="ledcount">Wich LED is located at 12 o'clock?</label>
            <input type="number" id="ledroot" name="ledroot" min="1" step="1" />

            <details>
                <summary>Advanced settings</summary>
                <p>
                    <label for="timeserver">NTP server</label>
                    <input type="text" id="timeserver" name="timeserver" maxlength="64" size="64" required
                        pattern="^([a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,6}$" />
                    <label for="hostname">Hostname</label>
                    <input type="text" id="hostname" name="hostname" maxlength="64" size="64" required
                        pattern="^[a-zA-Z][a-zA-Z0-9-_\.]{1,64}$" />
                </p>
                <p>
                    <button id="reset">Reset all settings</button>
                </p>
            </details>
        </form>
        <details>
            <summary>Software Update</summary>
            <h2>Firmware Update</h2>
            <form method='POST' action='/update' enctype='multipart/form-data'>
                Firmware:<br>
                <input type='file' accept='.bin' name='firmware'>
                <input type='submit' value='Update Firmware'>
            </form>
        </details>
    </div>
    <footer>ESP NeoPixel Clock <span id="version"></span> by Merlin Schumacher.
        <a href="https://github.com/merlinschumacher/esp8266-clock" target="_blank">
            Source code and more infos on GitHub.
        </a>
    </footer>
    <script src="/main.js"></script>
</body>

</html>