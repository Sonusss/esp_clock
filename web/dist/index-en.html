<!DOCTYPE html><html id="app"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><title rv-text="config.hostname | addEmoji &quot;⏰&quot;">ESP-CLOCK</title><link href="./styles.css" rel="stylesheet"></head><body lang="${{ index.langcode }}"><div class="container grid-sm"><div class="columns"><div class="toast toast-error my-2" rv-if="false"><span>ENABLE JAVASCRIPT TO CONFIGURE THE CLOCK </span></div><h1 class="column col-6 mt-2 col-sm-12">{ config.hostname }</h1><div class="column col-2"></div><div class="bottombar col-4 col-sm-12 columns mt-2"><button class="col-8 btn btn-lg btn-primary" id="save-button" onclick="saveConfig(true); return false;">Save</button><div class="col-1 hide-sm"></div><select class="col-2 form-input bg-primary btn btn-primary" id="language-selector" rv-on-input="loadLanguage" rv-value="config.language" value="${{ index.langcode }}"><option rv-each-language="languages" rv-value="language.code">{ language.icon } { language.name } </option></select></div><div class="col-12 columns column"><p class="col-6 col-xs-12 column">This is a digital LED-Wallclock</p><time class="col-6 col-xs-12 column pr-0">Current time { time | formatDate | watch time }</time></div><div class="column col-12"><form class="form-horizontal" id="configform" onsubmit="return false"><ul class="tab tab-block"><li class="tab-item active" id="colorconfig-tab"><a href="#colorconfig" onclick="return false;">Color</a></li><li class="tab-item" id="ledconfig-tab"><a href="#ledconfig" onclick="return false;">Time</a></li><li class="tab-item" id="sysconfig-tab"><a href="#sysconfig" onclick="return false;">System</a></li></ul><div class="contenttab" id="colorconfig"><h2>Color configuration</h2><div>Here you can configure the color and behaviour of the LED clock hands.</div><div class="divider"></div><div class="h4">Time configuration</div><fieldset class="form-horizontal"><div>Time configuration</div><div class="columns"><div class="column col-6 col-sm-12 mt-2"><div class="h6">Colors in the day.</div><div class="form-group"> <div class="col-4"><label class="form-label" for="hourcolor">Hour </label></div><div class="col-8"><input class="form-input" type="color" id="hourcolor" rv-value="config.hourColor"></div></div><div class="form-group"> <div class="col-4"><label class="form-label" for="minutecolor">Minute </label></div><div class="col-8"><input class="form-input" type="color" id="minutecolor" rv-value="config.minuteColor"></div></div><div class="form-group"><div class="col-4"><label class="form-label" for="secondcolor">Second </label></div><div class="col-8"><input class="form-input" type="color" id="secondcolor" rv-value="config.secondColor"></div></div></div><div class="column col-6 col-sm-12 mt-2"><div class="h6">Colors in the night.</div><div class="form-group"> <div class="col-4"><label class="form-label" for="hourcolordimmed">Hour </label></div><div class="col-8"><input class="form-input" type="color" id="hourcolordimmed" rv-value="config.hourColorDimmed"></div></div><div class="form-group"> <div class="col-4"><label class="form-label" for="minutecolordimmed">Minute </label></div><div class="col-8"><input class="form-input" type="color" id="minutecolordimmed" rv-value="config.minuteColorDimmed"></div></div><div class="form-group"><div class="col-4"><label class="form-label" for="secondcolordimmed">Second </label></div><div class="col-8"><input class="form-input" type="color" id="secondcolordimmed" rv-value="config.secondColorDimmed"></div></div></div></div></fieldset><div class="divider"></div><fieldset class="form-horizontal"><div class="form-group"> <div class="col-12"><label class="form-switch" for="daymonth"><input type="checkbox" id="daymonth" rv-checked="config.dayMonth"><i class="form-icon"></i><span>Display weekday, date and month </span></label></div></div></fieldset><div class="h4" rv-if="config.dayMonth">Date configuration</div><fieldset class="form-horizontal" rv-if="config.dayMonth"><div>Here you can setup the clock hands.</div><div class="columns"><div class="column col-6 col-xs-12 mt-2"><div class="h6">Colors in the day.</div><div class="form-group"> <div class="col-4"><label class="form-label" for="weekdaycolor">Weekday </label></div><div class="col-8"><input class="form-input" type="color" id="weekdaycolor" rv-value="config.weekdayColor"></div></div><div class="form-group"> <div class="col-4"><label class="form-label" for="daycolor">Date </label></div><div class="col-8"><input class="form-input" type="color" id="daycolor" rv-value="config.dayColor"></div></div><div class="form-group"><div class="col-4"><label class="form-label" for="monthcolor">Month </label></div><div class="col-8"><input class="form-input" type="color" id="monthcolor" rv-value="config.monthColor"></div></div></div><div class="column col-6 col-xs-12 mt-2"><div class="h6">Colors in the night.</div><div class="form-group"> <div class="col-4"><label class="form-label" for="weekdaycolordimmed">Weekday </label></div><div class="col-8"><input class="form-input" type="color" id="weekdaycolordimmed" rv-value="config.weekdayColorDimmed"></div></div><div class="form-group"> <div class="col-4"><label class="form-label" for="daycolordimmed">Date </label></div><div class="col-8"><input class="form-input" type="color" id="daycolordimmed" rv-value="config.dayColorDimmed"></div></div><div class="form-group"><div class="col-4"><label class="form-label" for="monthcolordimmed">Month </label></div><div class="col-8"><input class="form-input" type="color" id="monthcolordimmed" rv-value="config.monthColorDimmed"></div></div></div></div></fieldset><fieldset class="form-horizontal"><div class="form-group"> <div class="col-12"><label class="form-switch" for="bglight"><input type="checkbox" id="bglight" rv-checked="config.bgLight"><i class="form-icon"></i><span>Enable background light </span></label></div><div class="column col-6 bglightsettings" rv-if="config.bgLight"><div class="form-group"> <div class="col-4"><label class="form-label" for="bgcolor">Day </label></div><div class="col-8"><input class="form-input" type="color" id="bgcolor" rv-value="config.bgColor"></div></div></div><div class="column col-6 bglightsettings" rv-if="config.bgLight"><div class="form-group"> <div class="col-4"><label class="form-label" for="bgcolor">Night </label></div><div class="col-8"><input class="form-input" type="color" id="bgcolordimmed" rv-value="config.bgColorDimmed"></div></div></div></div></fieldset><fieldset class="form-horizontal"><div class="form-group"> <div class="col-12"><label class="form-switch" for="blendcolors"><input type="checkbox" id="blendcolors" rv-checked="config.blendColors"><i class="form-icon"></i><span>Blend overlapping colors into one. </span></label></div></div></fieldset><fieldset class="form-horizontal"><div class="form-group"> <div class="col-12"><label class="form-switch" for="fluidmotion"><input type="checkbox" id="fluidmotion" rv-checked="config.fluidMotion"><i class="form-icon"></i><span>Flowing motion for the second hand. </span></label></div></div></fieldset></div><div class="contenttab" id="ledconfig"><h2>Time configuration</h2><div>Here you can configure the time settings.</div><fieldset class="form-horizontal"><div class="form-group"> <div class="col-12"><label class="form-switch" for="hourlight"><input type="checkbox" id="hourlight" rv-checked="config.hourLight"><i class="form-icon"></i><span>Show a rainbow on top of the hour. </span></label></div></div></fieldset><div class="divider"></div><fieldset class="form-horizontal" id="alarmform"><div class="h6">Alarm</div><p>If you enable the alarm function a red ring will be shown at the given time.</p><div class="form-group"> <div class="col-5 col-sm-12"><label class="form-switch" for="alarmactive"><input type="checkbox" id="alarmactive" rv-checked="config.alarmActive"><i class="form-icon"></i><span>Alarm active </span></label></div><div class="divider-vert col-2 hide-xs alarmtime" rv-if="config.alarmActive"></div><div class="col-2 col-sm-4 alarmtime" rv-if="config.alarmActive"><label class="form-label" for="alarm">Alarm time </label></div><div class="col-3 col-sm-8 alarmtime" rv-if="config.alarmActive"><input class="form-input" type="time" id="alarm" rv-value="config.alarmTime"></div></div></fieldset><div class="divider"></div><fieldset class="form-horizontal"><div class="h6">When does the night begin</div><div class="form-group"><div class="col-2 col-xs-4"><label class="form-label" for="nightbegin">Start </label></div><div class="col-3 col-xs-8"><input class="form-input" type="time" id="nightbegin" rv-value="config.nightTimeBegins"></div><div class="divider-vert col-2 hide-xs"></div><div class="col-12 pt-2 show-xs"></div><div class="col-2 col-xs-4"><label class="form-label" for="nightbegin">End </label></div><div class="col-3 col-xs-8"><input class="form-input" type="time" id="nightend" rv-value="config.nightTimeEnds"></div></div></fieldset><div class="divider"></div><fieldset class="form-horizontal"><div class="form-group"><div class="col-4"><label class="form-label" for="timezone">Timezone </label></div><div class="col-8"><select class="form-input" id="timezone" rv-value="config.timezone"><option rv-each-timezone="timezones" rv-value="timezone">{ timezone | replaceUnderscore }</option></select></div></div></fieldset><div class="divider"></div></div><div class="contenttab" id="sysconfig"><h2>System configuration</h2><div>Here you can configure global system settings.</div><fieldset class="form-horizontal"><div class="form-group"><div class="col-4"><label class="form-label" for="ledpin">LED strip pin </label></div><div class="col-8"><input class="form-input" type="number" min="1" step="1" rv-value="config.ledPin"></div></div><div class="form-group"><div class="col-4"><label class="form-label" for="ledcount">LED strip length </label></div><div class="col-8"><input class="form-input" type="number" min="1" step="1" rv-value="config.ledCount"></div></div></fieldset><div class="divider" rv-if="config.dayMonth"></div><div class="h6" rv-if="config.dayMonth">LED ordering</div><p rv-if="config.dayMonth">You can define a custom start position on the LED strip for the weekday, date and month. The time is always fixed to the first 60 LEDs.</p><div class="columns mb-1" id="led-layout-labels" rv-if="config.dayMonth"><div class="column col-1"><span class="chip">1</span></div><div class="column col-10"><div class="columns col-gapless justify-content-center"><span class="chip col-auto"><span class="avatar avatar-sm bg-primary"> </span><span>Time</span></span><span class="chip col-auto"> <span class="avatar avatar-sm bg-warning"></span><span>Weekday</span></span><span class="chip col-auto"> <span class="avatar avatar-sm bg-success"></span><span>Date</span></span><span class="chip col-auto"> <span class="avatar avatar-sm bg-error"></span><span>Month</span></span></div></div><div class="column col-1"><span class="chip float-right" rv-text="config.ledCount"></span></div></div><div class="p-relative bg-gray" id="led-layout" rv-baroverflow="watch config.ledCount" rv-if="config.dayMonth"><div class="bg-primary led-layout-block" rv-barwidth="60 | watch config.ledCount" rv-barpos="1"></div><div class="bg-warning led-layout-block" rv-barwidth="7 | watch config.ledCount" rv-barpos="config.weekdayOffset | watch config.ledCount"></div><div class="bg-success led-layout-block" rv-barwidth="31 | watch config.ledCount" rv-barpos="config.dayOffset | watch config.ledCount"></div><div class="bg-error led-layout-block" rv-barwidth="12 | watch config.ledCount" rv-barpos="config.monthOffset | watch config.ledCount"></div></div><fieldset class="form-horizontal" id="ledorder" rv-if="config.dayMonth"><div class="form-group"><div class="col-2"><label class="form-label" for="weekday-pos-slider">Weekday</label></div><div class="col-9"><input class="col-12 slider pos-slider tooltip" id="weekday-pos-slider" type="range" min="1" rv-max="config.ledCount | sub 6" rv-value="config.weekdayOffset"></div><div class="col-1"><span class="chip mx-2 slider-chip" rv-text="config.weekdayOffset"></span></div></div><div class="form-group"><div class="col-2"><label class="form-label" for="date-pos-slider">Date</label></div><div class="col-9"><input class="col-12 slider pos-slider tooltip" id="date-pos-slider" type="range" min="0" rv-max="config.ledCount | sub 30" rv-value="config.dayOffset"></div><div class="col-1"><span class="chip mx-2 slider-chip" rv-text="config.dayOffset"> </span></div></div><div class="form-group"><div class="col-2"><label class="form-label" for="month-pos-slider">Month</label></div><div class="col-9"><input class="col-12 slider pos-slider tooltip" id="month-pos-slider" type="range" min="0" rv-max="config.ledCount | sub 11" rv-value="config.monthOffset"></div><div class="col-1"><span class="chip mx-2 slider-chip" rv-text="config.monthOffset"></span></div></div></fieldset><div class="divider"></div><fieldset class="form-horizontal"><div class="h6">Network settings</div><div class="form-group"><div class="col-4"><label class="form-label" for="timeserver">NTP time server </label></div><div class="col-8"><input class="form-input" pattern="^([a-zA-Z0-9]([a-zA-Z0-9-]{0,61 }}$[a-zA-Z0-9])?.)+[a-zA-Z]{2,6 }}$$" maxlength="64" size="64" required rv-value="config.timeserver"></div></div><div class="form-group"><div class="col-4"><label class="form-label" for="timeserver">Hostname </label></div><div class="col-8"><input class="form-input" pattern="^[a-zA-Z][a-zA-Z0-9-_.]{1,64 }}$$" maxlength="64" size="64" required rv-value="config.hostname"></div></div></fieldset><div class="divider"></div><fieldset class="form-horizontal"><div class="form-group"><div class="col-12"><button class="btn btn-lg modal-firmware-toggle" rv-on-click="toggleFirmwareModal">Firmware update</button></div></div></fieldset><div class="divider"></div><fieldset class="form-horizontal"><div class="form-group"><div class="col-12"><button class="btn btn-lg modal-reset-toggle" rv-on-click="toggleResetModal"> Reset clock</button></div></div></fieldset></div></form><div class="modal" id="modalfirmware"><a class="modal-overlay" href="#close" aria-label="Close" rv-on-click="toggleFirmwareModal"></a><div class="modal-container"><div class="modal-header"><a class="btn btn-clear float-right" href="#close" aria-label="Close" rv-on-click="toggleFirmwareModal"></a><div class="modal-title h4">Firmware update</div></div><div class="modal-body"><div class="content"><p>Update the firmware of the clock by selecting an update file and click 'Start update'. After about a minute the clock should be updated.</p><form class="form-horizontal" method="POST" action="/update" enctype="multipart/form-data"><div class="form-group"><div class="col-2"><label class="form-label" for="firmware">File</label></div><div class="col-7"><input class="form-input" type="file" accept=".bin" name="firmware"></div><div class="col-3"><button class="btn btn-lg mx-2" type="submit">Start update</button></div></div></form></div></div><div class="modal-footer"><div id="fwinfo"></div></div></div></div><div class="modal" id="modalreset"><a class="modal-overlay" href="#close" aria-label="Close" rv-on-click="toggleResetModal"></a><div class="modal-container" role="document"><div class="modal-header"><a class="btn btn-clear float-right" href="#close" aria-label="Close" rv-on-click="toggleResetModal"></a><div class="modal-title h4">Reset the clock</div></div><div class="modal-body"><div class="content"><p>This resets all settings. You'll have to reconnect to the WiFi provided by the clock and reconfigure the clock.<div class="columns"><div class="col-6 column"><button class="btn btn-lg modal-reset-toggle">Cancel</button></div><div class="col-6 column"><button class="btn btn-error btn-lg float-right">RESET EVERYTHING!</button></div></div></p></div></div></div></div></div></div></div><script src="./scripts.js"> </script></body></html>